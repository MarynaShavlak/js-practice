{"mappings":"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","sources":["src/infinite-scroll-intersection-observer/io.js","src/infinite-scroll-intersection-observer/articles.hbs","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/infinite-scroll-intersection-observer/news-service.js","<<jsx-config-pragma.js>>","src/infinite-scroll-intersection-observer/infinitescroll.js"],"sourcesContent":["/**\n * Typical Observer's registration\n */\nconst callback = (entries, io) => {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      console.log('Привет из колбека в forEach');\n      console.log(entry.target);\n    }\n  });\n};\nconst options = {\n  // rootMargin: '100px',\n  // threshold: 0.5,\n};\nconst observer = new IntersectionObserver(callback, options);\n\nconst sentinel = document.querySelector('#sentinel');\nobserver.observe(sentinel);\n","{{#each this}}\n<li>\n  <a href=\"{{url}}\" target=\"_blank\" rel=\"noopener noreferrer\">\n    <article>\n      <img src=\"{{urlToImage}}\" alt=\"\" width=\"480\">\n      <h2>{{title}}</h2>\n      <p>Posted by: {{author}}</p>\n      <p>{{description}}</p>\n    </article>\n  </a>\n</li>\n{{/each}}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","const API_KEY = 'bb47a995514a49758140b073ef1103f5';\nconst BASE_URL = 'https://newsapi.org/v2';\nconst options = {\n  headers: {\n    Authorization: API_KEY,\n  },\n};\n\nexport default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    const searchParams = new URLSearchParams({\n      q: this.searchQuery,\n      language: 'en',\n      pageSize: 10,\n      page: this.page,\n    });\n    const url = `${BASE_URL}/everything?${searchParams}`;\n    // const url = `${BASE_URL}/everything?q=${this.searchQuery}&language=en&pageSize=10&page=${this.page}`;\n\n    return fetch(url, options)\n      .then(response => response.json())\n      .then(({ articles }) => articles);\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n",null,"// https://www.smashingmagazine.com/2018/01/deferring-lazy-loading-intersection-observer-api/\n\nimport './io';\nimport articlesTpl from './articles.hbs';\nimport NewsApiService from './news-service';\n\nconst refs = getRefs();\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  newsApiService.query = e.currentTarget.elements.query.value;\n\n  if (newsApiService.query === '') {\n    return alert('Введи что-то нормальное');\n  }\n\n  newsApiService.resetPage();\n  clearArticlesContainer();\n  newsApiService.fetchArticles().then(articles => {\n    appendArticlesMarkup(articles);\n    newsApiService.incrementPage();\n  });\n}\n\nfunction appendArticlesMarkup(articles) {\n  refs.articlesContainer.insertAdjacentHTML('beforeend', articlesTpl(articles));\n}\n\nfunction clearArticlesContainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n\nfunction getRefs() {\n  return {\n    searchForm: document.querySelector('.js-search-form'),\n    articlesContainer: document.querySelector('.js-articles-container'),\n    sentinel: document.querySelector('#sentinel'),\n  };\n}\n\nconst onEntry = entries => {\n  entries.forEach(entry => {\n    if (entry.isIntersecting && newsApiService.query !== '') {\n      // console.log('Пора грузить еще статьи' + Date.now());\n      newsApiService.fetchArticles().then(articles => {\n        appendArticlesMarkup(articles);\n        newsApiService.incrementPage();\n      });\n    }\n  });\n};\n\nconst observer = new IntersectionObserver(onEntry, {\n  rootMargin: '150px',\n});\nobserver.observe(refs.sentinel);\n"],"names":["$fd6db530dbbc2c21$var$observer","IntersectionObserver","entries","io","forEach","entry","isIntersecting","console","log","target","$fd6db530dbbc2c21$var$sentinel","document","querySelector","observe","$l5bVx","parcelRequire","$8a427ea51be14782$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","noop","useData","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","$ec5f66eea4fe00c9$var$options","headers","Authorization","$ec5f66eea4fe00c9$export$2e2bcd8739ae039","NewsApiService","this","searchQuery","page","searchParams","URLSearchParams","q","language","pageSize","url","concat","fetch","then","response","json","param","articles","newQuery","$c7d933dde568a8d5$var$refs","searchForm","articlesContainer","sentinel","$c7d933dde568a8d5$var$newsApiService","$c7d933dde568a8d5$var$appendArticlesMarkup","insertAdjacentHTML","addEventListener","e","preventDefault","query","currentTarget","elements","alert","resetPage","innerHTML","fetchArticles","incrementPage","rootMargin"],"version":3,"file":"infinitescroll-intersection-observer.d0588ea4.js.map"}